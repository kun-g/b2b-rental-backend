# 文档信息

- 标题：B2B 同行租赁效率工具 — **货架模型** MVP PRD v0.2（拍板版）
- 创建日期：2025-10-04
- 更新日期：2025-10-15
- 适用：首轮试点（广深周边 / 大疆设备）
- 依据：你刚刚拍定的“货架”口径 + 既有状态机/运费模板

---

# 0. 变更摘要
- 10-27更新说明 - young
	- 增加运费补差价流程
- 10-25更新说明 - young
	- 增加归还地址的说明
	- 删除旧的超时补价流程
- 10-24更新说明 - young
	- 更新状态机，删除超时补价相关状态
- 10-22更新说明 - young
	- 订单状态机中paid状态改为商户确认已支付后流转到代发货状态；
- 10-15更新说明 - young
	- 完善了账号的功能描述 ，增加了账号登录流程
- 10-14更新说明 - young
	- 页面清单完善说明，增加了每个业务后台对应的账号类型与默认页面
	- 添加了账号体系说明，增加了账号多类型的设定；
	- 增加了设备管理的流程说明；
	- 增加了超时补价流程，并更新了状态机；
	- 删除了本次版本无关的内容
  
---

# 1. 一句话定义

面向授信同行网络的 **B2B 设备租赁“货架”工具**（试点：大疆），以 **目录上架→下单→履约→结算** 最小闭环降低追踪、记账、对账的人力成本，并提升**成交笔数**。

---

# 2. 账号体系与权限

## 2.1 账号类型

### 用户账号（租方）
- **注册方式**：平台创建账号后提供给使用者
- **必填信息**：用户名、手机号
- **可选填写信息**：邮箱

### 商户账号（出方）
- **入驻方式**：平台创建账号后提供给使用者
- **必填信息**：用户名、手机号、所属商户
- **可选填写信息**：邮箱
- **成员管理**：支持添加子账号（仓配、财务、运营等角色）
- **角色类型**：
	- **商户管理员**：拥有商户最高权限
	- **商户成员**：可管理订单列表、商品、运费模板以及商户信息

### 平台账号（运营方）
- **创建方式**：超级管理员手动创建
- **角色类型**：
  - **平台管理员**：全部权限
  - **平台运营**：创建成员账号
  - **平台客服**：只读权限、协助解卡
 
### 功能说明
1. 平台运营、平台客服、用户与商户账号在当前版本由平台超级管理员创建后提供给使用者；
2. 平台超级管理员创建账号时除每个类型账号必填与可选填写信息以外，必须要选择至少一个账号类型；
3. 如果账号同时有多种类型，登录成功以后需要选择访问哪个类型的后台，登录后可在后台切换，否则直接进入对应类型的后台；
4. 一个账号只能归属于一个商户，可以修改账号的归属商户；
5. 当前版本商户由平台方创建，目前不支持由账号创建；

### 账号登录流程与功能说明
1. 账号有3个业务类型身份，分别为商户、租方与平台，分别对应一个类型的业务后台，一个账号可以同时拥有多个类型；
2. 角色是每种账号类型下定义的，例如小明在商户中是商户成员角色，平台中是平台运营角色，同时也是租方；
3. 账号登录流程为账号登录成功以后，根据账号的类型，访问流程不同
	- 如果是多类型的账号，进入后台类型选择界面，可选择其中一个后台进行访问，访问至后台后，可通过用户名右侧的切换功能切换访问的后台类型；
	- 如果是单类型的账号，则直接进入对应类型的后台；

## 2.2 角色与权限矩阵

| 功能模块 | 用户（租方） | 商户成员 | 商户管理员 | 平台运营 | 平台管理员 |
|---------|------------|---------|-----------|---------|-----------|
| **账号管理** |
| 注册/登录 | ✅ 自主注册 | ❌ | ❌ | ❌ | ❌ |
| 修改个人信息 | ✅ | ✅ | ✅ | ✅ | ✅ |
| **商品（SKU）** |
| 浏览SKU | ✅ 仅受信 | ❌ | ✅ 自家SKU | ✅ 全部 | ✅ 全部 |
| 创建/编辑SKU | ❌ | ✅ | ✅ | ❌ | ❌ |
| **商户管理** |
| 浏览商户信息 | ❌ | ❌ | ✅ | ✅  | ✅  |
| 创建/编辑归还地址信息 | ❌ | ❌ | ✅ | ❌ | ❌ |
| 创建/编辑商户信息 | ❌ | ❌ | ✅ | ❌ | ❌ |
| **设备管理** |
| 浏览设备列表 | ❌ | ✅ | ✅ | ✅ 全部 | ✅ 全部  |
| 创建/编辑设备列表 | ❌ | ✅ | ✅ | ❌ | ❌ |
| 订单录入物流时添加设备 | ❌ | ✅ | ✅ | ❌ | ❌ |
| **授信管理** |
| 查看授信额度 | ✅ 自己的 | ❌ | ✅ 发出的授信 | ✅ 全部 | ✅ 全部 |
| 授予/撤销授信 | ❌ | ❌ | ✅ | ❌ | ❌ |
| **订单管理** |
| 下单/支付 | ✅ | ❌ | ❌ | ❌ | ❌ |
| 取消订单（NEW/PAID） | ✅ | ❌ | ❌ | ❌ | ❌ |
| 改址（TO_SHIP） | ✅ ≤2次 | ❌ | ❌ | ❌ | ❌ |
| 运费补差价（TO_SHIP） | ✅ ≤2次 | ❌ | ❌ | ❌ | ❌ |
| 提交回寄（IN_RENT） | ✅ | ❌ | ❌ | ❌ | ❌ |
| 查看订单 | ✅ 自己的 | ✅ 商户的 | ✅ 商户的 | ✅ 全部 | ✅ 全部 |
| 录入物流+SN（TO_SHIP） | ❌ | ✅ | ✅ | ❌ | ❌ |
| 确认签收（SHIPPED） | ❌ | ✅ | ✅ | ❌ | ❌ |
| 支付超时差价（SHIPPED） | ✅ | ❌ | ❌ | ❌ | ❌ |
| 确认差价已支付（SHIPPED） | ❌ | ✅ | ✅ | ❌ | ❌ |
| 确认回寄（RETURNING） | ❌ | ✅ | ✅ | ❌ | ❌ |
| 确认完成（RETURNED） | ❌ | ✅ | ✅ | ❌ | ❌ |
| **运费模板** |
| 查看模板 | ❌ | ✅ | ✅ | ✅ | ✅ |
| 创建/编辑模板 | ❌ | ✅ | ✅ | ❌ | ❌ |
| **归还地址** |
| 查看归还地址 | ❌ | ✅ | ✅ | ✅ | ✅ |
| 创建/编辑归还地址 | ❌ | ✅ | ✅ | ❌ | ❌ |
| **平台运营** |
| 不发地区豁免 | ❌ | ❌ | ❌ | ✅ | ✅ |
| 强制流转（解卡） | ❌ | ❌ | ❌ | ✅ 需留痕 | ✅ |
| 查看审计日志 | ❌ | ❌ | ❌ | ✅ | ✅ |
| **成员管理** |
| 添加/移除成员 | ❌ | ❌ | ✅ 商户内 | ❌ | ✅ 平台内 |
| 分配角色权限 | ❌ | ❌ | ✅ 商户内 | ❌ | ✅ 平台内 |
| **审计日志** |
| 浏览审计日志 | ❌ | ❌ | ❌ | ❌ | ✅ 全部 |


## 2.4 认证与鉴权机制

### 认证方式
- **用户端**：手机号+验证码
- **商户端**：手机号+密码
- **平台端**：账号密码

### Token 管理
- **JWT Token**：有效期 7 天，包含 `userId`、`role`、`merchantId`（商户端）
- **刷新机制**：Refresh Token 30 天，到期前自动刷新
- **多端登录**：允许同一账号在多设备登录（可配置踢出策略）

### 权限校验
- **路由级**：基于角色的访问控制（RBAC）
- **数据级**：
  - 用户只能操作自己的订单
  - 商户只能操作自己的 SKU/订单
  - 平台可全局查看，操作需审计留痕
- **操作级**：敏感操作（授信调整、强制流转）需二次确认

## 2.5 数据隔离

- **用户维度**：用户 A 无法查看用户 B 的订单/对账单
- **商户维度**：商户 A 无法查看商户 B 的 SKU/订单/授信数据
- **平台维度**：平台可全局查看，但敏感操作（查看结算账户、修改授信）需记录审计日志

---

# 3. 目录/商品结构（货架）

## 3.1 类目（平台）

- 平台仅维护：`category{id, name, parent_id, path, sort}`；不设统一SPU。

## 3.2 商户SKU（商户自建，归属类目）

- 最小字段：`merchant_sku{id, merchant_id, category_id, name, daily_fee,  device_value(授信参考), inventory_qty, shipping_template_id, is_listed, created_by, updated_by, ts}`
- 语义：代表**可重复出租的款式**；**发货时**在订单上绑定 `device_id/SN`。
- 可见性：仅对有授信的用户展示。

---

# 4. 授信与可见性

- 维度：`user×merchant`；记录：`credit_limit`、`status`（enabled/disabled）。
- 可见性规则：用户仅能浏览/下单 **授信启用** 的商户下SKU。
- 超额度：阻止下单（需先提升授信或降低订单金额）。
- 撤销授权：即时生效，相关SKU**不可见**；不影响已创建订单。

---

# 5. 订单流程与状态机 v0.3（可读编码）

> 单订单=单商户×单SKU×1台；不支持多SKU/多商户。

| 编码 |  状态名 | 进入条件 | 允许操作（角色） | 流转触发  | 备注  |
| --- | --- | --- | --- | --- | --- |
| NEW | 新订单 | 用户点击“下单”，生成未支付订单快照（含租期、运费快照） | 用户可取消 | 支付成功 → PAID| 仅用于支付前留存与风控校验 |
| PAID |已支付 | 用户一次性支付租金+运费；按 device_value 冻结授信 | 用户可取消 | **商户确认已支付** → TO_SHIP | 去掉“商户接单”环节；已冻结授信以便后续扣款/补偿 |
| TO_SHIP | 待发货 | 商户确认支付完成进入 | 用户可改地址（≤2次） | 若无运费差价，商户录入**物流单号+设备SN** → SHIPPED；若存在运费差价，必须要用户已支付运费差价且商户录入**物流单号+设备SN** → SHIPPED | 改址差额：补差/退款；命中不发地区拦截或由平台豁免 |
| SHIPPED  | 已发货 | 商户录入物流单号+SN | —   | 物流签收（API回传优先；或商户确认） → IN_RENT | 计费起点=发货当日**次日00:00**（默认UTC+8） |
| IN_RENT | 租赁中 | 物流签收 | 用户提交回寄单号 | 用户录回寄 → RETURNING；到期未归还 → 生成逾期支付单（COMPLETED时支付） | 逾期按“天”向上取整  |
| RETURNING | 归还中 | 用户录回寄单号 | —   | 商户签收回寄 → RETURNED | —  |
| RETURNED | 已归还 | 回寄签收（商户确认已收到） | 商户可：1) 直接“确认完成”；2) 在**此时**若商户签收确认时间超过了订单的租赁时间，则超时需要补差价，此时更新订单总金额，租方需要支付差价以后商户方才可以完成订单 | 若商无超时补价 → COMPLETED；若超时 → 停留在当前状态 → 租方支付差价 → 商户确认已支付 → COMPLETED | 关键点：商户只有在已归还（RETURNED）时发起补价；若发起则不会直接流转到 COMPLETED，必须走补价收款流程。 |
| COMPLETED | 已完成 | 商户确认完成（且若有超时补价，用户已支付）；或在无补价路径下商户直接确认完成  | —  | 生成对账单；释放授信； | 终态。注意：若存在未结清的逾期/补价，不能进入该状态。 |
| CANCELED | 已取消 | 仅 NEW / PAID 可取消 | —   | 全额退回租金与运费；释放授信 | 终态 |

备注

- 无真实支付时的支付功能说明
	- 需求背景：目前暂未接入真实的支付功能，租方无法支付，导致订单无法流转；
	- 基于背景中遇到的问题，将按照如下说明进行流程改进。
		1. 在租方点击“去支付”以后，进入支付页；
		2. 在支付页中用户进行支付，此时弹窗进行确认，弹窗文案为“当前版本暂不支持支付，请确认支付成功后点击确认按钮，订单将进入下一状态”。
			- 如果弹窗中点击确认，则订单进入“已支付”状态；
			- 如果弹窗中点击取消，则订单依然停留在当前状态；
- 超时补差价流程说明如下：
在RETURNED（已归还）状态时根据“确认签收”时间进行判断：
	1. 如果在订单的租赁时间内，自动流转到已完成状态；
	2. 如果超出订单租赁时间，则更新订单总价，租方后台必须要支付差价，支付完成后由商户方确认方可流转至已完成状态；
- 运费补差价流程上说明如下：
如果租方用户在发货前修改了发货地址并产生了运费差价，此时必须要由租房支付运费差价以后，商户方才可以填写发货信息进行发货；
	- 在用户下单填写地址解析成功后，根据当前生效的运费模板匹配运费
		- 如果是不发货地区，则提示“该地址为不发货地区，请修改地址”，该订单不能创建；
	- 若用户在创建订单后修改了地址，则根据地址变化计算差价，并更新订单总额；
		- 如果需要补运费差价，商户无法发货，必须要用户支付差价以后才能由商户发货；
		- 如果需要退运费差价，则在订单完成后统一结算，进行退款；
	- 运费模板中，同时只能有一个模板生效；
 

## 5.1 用户故事（核心）

- **US-01 浏览受信商户目录**  
  **人物**：何倩（租方运营助理，*谨慎/赶进度*）  
  **动机**：快速确认“我能下单的商户与SKU”，避免被拒单、节省沟通。  
  **情绪**：担心耽误客户交期，希望所见即所能买。  
  **验收标准（G/W/T）**  
  - **Given** 我被商户A授信>0，**When** 打开A所在类目，**Then** 我能看到A的SKU；价格与daily_fee清晰可见。  
  - **Given** 我未被商户B授信，**When** 打开B所在类目，**Then** 我看不到B的SKU。

- **US-02 下单并支付**  
  **人物**：何倩（租方运营助理，*紧迫/怕出错*）  
  **动机**：在SKU页选定租期，一次支付租金+运费，迅速锁单。  
  **情绪**：着急锁供给，但不希望重复支付或字段遗漏。  
  **验收标准（G/W/T）**  
  - **Given** 我选择某商户SKU与租期，**When** 支付成功，**Then** 订单=**PAID** 并**自动**转 **TO_SHIP**，同时冻结授信=设备价值，订单快照包含`daily_fee_snapshot/region命中/运费模板版本`。

- **US-03 待发货改址与差额**  
  **人物**：何倩（租方运营助理，*谨慎/怕多付*）  
  **动机**：客户临时改收货地，需要无痛改址并自动算差额。  
  **情绪**：担心被额外收取不透明费用。  
  **验收标准（G/W/T）**  
  - **Given** 订单处于 **TO_SHIP**，**When** 我改到更贵地区且差额≥1元，**Then** 生成**补差支付单**，未支付前不得发货。  
  - **Given** 改到更便宜地区，**When** 提交改址，**Then** 自动生成退款记录；两次改址上限生效。

- **US-04 商户发货**  
  **人物**：王越（商户仓配主管，*务实/重规范*）  
  **动机**：录入物流单号与设备SN，确保追踪链与计费起点明确。  
  **情绪**：害怕漏填SN导致责任不清。  
  **验收标准（G/W/T）**  
  - **Given** 我录入完整物流+SN，**When** 提交，**Then** 订单=**SHIPPED**，系统计算计费起点=发货当日**次日00:00**（默认UTC+8）。

- **US-05 签收并开始计费**  
  **人物**：系统（物流回传） & 王越（商户），*追求可验证/不扯皮*  
  **动机**：以签收事件作为“租赁中”的起点，确保后续逾期有据可循。  
  **情绪**：希望机器自动、人工兜底。  
  **验收标准（G/W/T）**  
  - **Given** 物流签收（API回传优先，或商户人工确认），**When** 确认成功，**Then** 订单=**IN_RENT**；超过约定到期，自动生成**逾期支付单**（在 **COMPLETED** 时一并支付）。

- **US-06 发起归还与完成**  
  **人物**：何倩（租方），王越（商户），*希望顺利完结/轻松对账*  
  **动机**：提交回寄单号并尽快完成验收与对账，释放授信。  
  **情绪**：担心丢件与漏项；希望一次结清。  
  **验收标准（G/W/T）**  
  - **Given** 我在 **IN_RENT**，**When** 录入回寄单号，**Then** 订单=**RETURNING**；商户签收后=**RETURNED**；商户确认后=**COMPLETED**，系统生成对账单并释放授信。

- **US-07 商户授信管理**  
  **人物**：王越（商户运营负责人，*风控优先/要可控*）  
  **动机**：对用户授予/撤销授信，决定其商品可见与下单能力。  
  **情绪**：希望一键生效、低成本维护。  
  **验收标准（G/W/T）**  
  - **Given** 我撤销对某用户授信，**When** 确认操作，**Then** 其立即��不到我名下SKU；既有订单不受影响。

- **US-08 运费模板与不发地区**  
  **人物**：王越（商户运营），李曼（平台运营，*稳健合规*）  
  **动机**：按地区设置固定价并拦截不发地区；平台可对特例豁免。  
  **情绪**：商户要算得清、平台要控合规与例外留痕。  
  **验收标准（G/W/T）**  
  - **Given** 地址命中**不发地区**，**When** 下单，**Then** 被拦截并提示原因；若平台执行**豁免**，**Then** 可继续下单且订单记录豁免人、时间与原因。

- **US-09 平台邀请商户**  
  **人物**：李曼（平台运营，*稳健招商*）；王越（商户）  
  **动机**：平台发出邀请，商户完成资料后即可上架SKU并面向被授信用户可见。  
  **情绪**：平台要把控准入质量，商户希望尽快开业。  
  **验收标准（G/W/T）**  
  - **Given** 平台发送邀请，**When** 商户接受并完成资料审核，**Then** 商户可创建商户SKU并上线；对其授信的用户可见。

- **US-10 转单找货（B→A 代发）**  
  **人物**：李青（B，渠道商，*焦虑/时间紧张*）；王越（A，履约商户，*谨慎/务实*）  
  **动机**：B 接到终端客户订单但库存不足，希望把单交由受信商户 A 履约，并在平台内一次下单，不再去微信群反复询价。  
  **情绪**：B 急于锁定供给，担心砸单；A 关心订单信息是否完整、避免扯皮。  
  **验收标准（G/W/T）**  
  - **Given** B 已被商户 A 授信>0；A 的 SKU 已上架；  
    **When** B 在类目下打开 A 的 SKU，选择租期并将**收货地址填写为终端客户地址**后下单并支付；  
    **Then** 订单流转 `NEW→PAID→TO_SHIP`，A 可见订单并按常规发货（`TO_SHIP→SHIPPED`），B 全程可在订单详情查看状态与时间戳；不依赖微信群沟通。  
  - **Given** B 在 **TO_SHIP** 期改客户地址到更贵地区；  
    **When** 系统计算差额≥1元；  
    **Then** 自动生成补差支付单，未支付不可进入 **SHIPPED**。

- **US-11 代交付后的对账（A 与 B）**  
  **人物**：王越（A，履约商户，*讨厌漏项/需要证据闭环*）；李青（B，渠道商，*需要算清成本与应收*）  
  **动机**：A 帮 B 交付后，需要统一追踪：设备发往何处、是否归还、是否逾期、补收费项、B 是否结清；B 需要据此向其终端客户结算。  
  **情绪**：A 害怕事后扯皮；B 担忧对不上数、影响现金流。  
  **验收标准（G/W/T）**  
  - **Given** 订单完成（**RETURNED→COMPLETED**），  
    **When** 系统生成对账单；  
    **Then** A 与 B 均可下载/查看**同一份**对账单快照，包含：租金、运费、逾期金额、改址差额、退款、设备 SN、关键时间戳（发货/签收/回寄/完成）。  
  - **Given** 订单逾期或在 **TO_SHIP** 期间发生地址差额，  
    **When** 生成对应“逾期/补差”记录；  
    **Then** 这些条目**自动并入**对账单明细，A/B 双方可据此核对应收/应付。

---
# 6. 计费与运费

- **计费起点**：发货当日的**次日00:00**（默认北京时间，可配置时区）。
- **逾期**：超出下单时租期即逾期；`逾期金额 = ceil(逾期小时/24) × 日费率`；生成滚动追加的“逾期支付单”，在 COMPLETED 一并支付。
- **运费模板（商户×商户SKU）**：
  - 下单（NEW→PAID）锁定并收取；订单写入模板**版本快照**。
  - 价格优先级：**不发地区 > 指定地区价 > 默认价**；不发地区=下单拦截（操盘手可豁免并留痕）。
  - S1改址：更贵→补差支付单（未付不可发货）；更便宜→自动退款；差额阈值≥1元；SHIPPED 起不再改址。
  - 回寄运费：不纳入模板。

---
# 7. 商品与设备（暂不支持，后续补充）
1. 一个商品SKU拥有多个设备，每台设备通过设备序列SN号区分；
2. 添加设备有两种方式：
	- 当商户为订单录入物流信息时，填写了一个设备列表中不存在的SN号时，即视为添加了这个SKU下的一台设备；
	- 在设备管理中直接添加设备；
3. 若商户在录入物流时，填写的设备已在其他尚未完成的订单中时或无法使用时，则进行提示，设备状态与异常提示见下方描述。未完成订单中的设备需要记录所在租赁订单号，订单完成后重置；

| 状态 | 中文说明 | 异常提示 |
| --- | --- | --- |
| active | 设备可用 |  |
| in_active| 被锁定，无法使用 | 该设备目前无法使用，请使用其他设备 |
| used | 被使用，从订单发货到完成均为被使用 | 该设备正在被租赁，请使用其他设备 |


---

# 8. 信息架构与页面规划（MVP）

## 8.1 站点拆分建议（推荐 2+1 模式）
- **租方门户（Customer Site）**：面向“用户/渠道商”。浏览受信商户与SKU、下单、支付、订单/对账单管理。
- **商户控制台（Merchant Console）**：面向“商户”。上架SKU、运费模板、授信管理、发货与完结。
- **平台后台（Admin）**：面向“平台方”。类目、商户邀请/审核、全局只读与豁免操作、系统配置与审计。
> 可选：统一登录/权限中心（SSO），三端共用。

## 8.2 站点地图（Sitemap）
**租方门户**
- 登录/注册（SSO）、账号/认证
- 类目浏览（仅显示受信商户的SKU）
- 商户店铺页 → 商户SKU列表
- SKU详情/下单（选择租期、确认运费）
- 支付页（合并租金+运费）
- 订单列表（可通过订单号、商户、订单创建时间、租赁订单号、订单状态过滤）
- 订单详情（取消、改址、回寄单号、对账单）

**商户控制台**
- 订单中心（按状态、下单用户、订单创建时间、租赁订单号过滤；批量导出）
  - 订单详情（录物流单号+SN；回寄签收；确认完成）
- 商品（商户SKU）管理：
	- 商品SKU：列表/新建/编辑/下架/库存（inventory_qty）
	- 设备管理：列表/新建/编辑/（暂不支持，后续补充）
- 运费模板管理（商户×商户SKU×地区固定价；不发地区）
- 授信管理（user×merchant：授权/撤销/额度）
- 商户管理（资料、结算账户、成员/角色、商品归还地址）

**平台后台**
- 类目管理（新增/排序/停用）
- 商户列表管理（邀请/审核/禁用；资料查看）
- 全局订单只读视图（必要时强制流转解卡）
- 不发地区豁免审批/操作记录
- 审计与导出

## 8.3 页面清单与功能（按站点）
**租方门户**

| 页面 | 主要功能 | 关键操作 | 访问权限 |
|---|---|---|---|
| 类目/列表 | 展示受信商户的SKU | 过滤、跳转SKU详情 | 登录用户（被授信） |
| SKU详情/下单 | 选择租期、计算运费、下单 | 创建NEW、支付→PAID | 登录用户（被授信） |
| 支付 | 支付租金+运费 | 成功→PAID→自动TO_SHIP | 登录用户 |
| 订单列表 | 查看订单 | 过滤、导出（可选） | 登录用户 |
| 订单详情 | 取消（NEW/PAID）、改址（TO_SHIP）、回寄（IN_RENT） | 录回寄、查看对账单 | 登录用户 |
- 补充说明
	- 用户账号登录以后，进入租方门户
	- 默认页面为“SKU详情/下单”

**商户控制台**

| 页面 | 主要功能 | 关键操作 | 访问权限 |
|---|---|---|---|
| 订单中心 | 各状态订单 | 录物流+SN、回寄签收、确认完成 | 商户成员 |
| 商户SKU管理 | 上架/下架、库存 | 新建/编辑/下架 | 商户成员（商品权限） |
| 运费模板 | 固定价/不发地区 | 绑定到商户SKU | 商户成员（运费权限） |
| 授信管理 | user×merchant 授权/撤销/额度 | 授信开关/额度设置 | 商户成员（风控权限） |
| 归还地址 | 设备归还的联系人、电话与地址管理 | 新增、编辑修改归还地址 | 商户成员 |
| 商户管理 | 资料、结算、成员/角色 | 新增成员/分配角色 | 商户管理员 |
- 补充说明
	- 商户账号登录以后，进入商户控制台
	- 默认页面为“订单中心”

**平台后台**

| 页面 | 主要功能 | 关键操作 | 访问权限 |
|---|---|---|---|
| 类目管理 | 维护类目树 | 新增/编辑/排序/停用 | 平台运营/管理员 |
| 商户列表管理 | 邀请/审核/禁用 | 审核通过、禁用、重发邀请 | 平台运营/管理员 |
| 订单总览 | 全局只读与解卡 | 强制流转（带原因） | 平台管理员 |
| 审计/导出 | 系统级日志、数据导出 | 下载CSV | 平台运营/管理员 |

- 补充说明
	- 平台账号登录以后，进入平台后台
	- 默认页面为“订单总览”

## 8.4 权限矩阵（页面×角色）
| 页面/模块 | 租方用户 | 商户运营 | 商户管理员 | 平台运营 | 平台管理员 |
|---|---|---|---|---|---|
| 类目/列表/SKU详情（门户） | 读 | — | — | 读 | 读 |
| 下单/支付 | 写 | — | — | — | — |
| 订单列表/详情（门户） | 读/部分写 | — | — | 读 | 读 |
| 订单中心（商户） | — | 读/写 | 读/写 | 读 | 读 |
| 商户SKU管理 | — | 读/写 | 读/写 | 读 | 读 |
| 归还地址 | — | 读/写 | 读/写 | 读 | 读 |
| 运费模板 | — | 读/写 | 读/写 | 读 | 读 |
| 授信管理 | — | 读/写 | 读/写 | 读 | 读 |
| 商户管理 | — | 读 | 读/写 | — | — |
| 类目管理（平台） | — | — | — | 读/写 | 读/写 |
| 配置中心/审计 | — | — | — | 读 | 读/写 |

> 说明：细粒度按钮级权限可在后续RBAC中细化（如“确认完成”“强制流转”“豁免不发地区”）。


## 8.5 页面状态与边界（MVP）
- **空态**：无授信→目录空白提示；无SKU→引导联系商户；订单空列表。
- **异常态**：命中不发地区→下单阻断；改址超过2次→提示限制；补差未付→禁止发货；物流签收未回传→允许人工确认并留痕。
- **权限不足**：未被授信的商户SKU/订单详情→403；非商户成员访问控制台→登录重定向；平台操作需二次确认并写审计日志。

---
# 后续可改进的内容
1. 接入支付宝支付、分账、退款，已支持本次订单流程中的订单支付、超时补价格、订单取消以及商户收款；
2. 增加短信验证注册与登录，并开放使用者自行注册；
3. 增加商户管理，可由使用者自行创建管理商户，并邀请成员加入；
